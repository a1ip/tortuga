!function(){var a=0,b=1,c=(Function.prototype.bind,Array.prototype.slice),d=function(a){var b=this,d=c.call(arguments,1);return function(){return a.apply(b,d.concat(c.apply(arguments)))}},e=function(a){var b=this,d=c.call(arguments,1);return function(){return a.apply(b,c.apply(arguments).concat(d))}},f=function(a){var b=this,d=c.call(arguments,1);return function(){for(var e=c.call(d),f=e.length,g=0,h=0;f>h;++h)void 0===e[h]&&(e[h]=arguments[g],++g);return a.apply(b,e)}},g=function(){function a(){try{throw Error("")}catch(a){return a}}for(var b=[],c=0;c<arguments.length;++c)b.push(arguments[c]);var d,e=a();d=e.stack.split("\n")[5];var f=d.indexOf(".js"),g=d.substr(0,f+3);f=g.lastIndexOf("/"),g=g.substr(f+1,g.length);var h="		File: "+g;f=d.lastIndexOf(":"),g=d.substr(0,f),f=g.lastIndexOf(":"),g=g.substr(f+1,g.length),h+=" Line: "+g,b.push(h),console.log.apply(console,b)},h=function(a,b){a||(b="function"==typeof b?b():b,g("Failed: ",b))},i=function(a){return"object"==typeof a&&a.constructor.toString().match("function Array.*")},j=function(a,b,c){var d=[];if(i(a))for(var e=a.length,f=0;e>f;++f)d.push(b(a[f],f));else for(var f in a)(c||a.hasOwnProperty(f))&&d.push(b(a[f],f));return d},k=function(a,b){return a.every(b)},l=function(a,b){return!a.every(q(b))},m=function(a,b){var c=0;return a.forEach(function(a){c+=Number(Boolean(b(a)))}),c},n=function(){return!0},o=function L(a){var b=c.call(arguments,1);return function(){return a.apply(null,arguments)&&(b.length<=0||L.apply(null,b).apply(null,arguments))}};!function(){var a=function(a){return a>3},b=function(a){return 7>a},c=o(a,b);h(c(4),"3 < 4 < 7"),h(c(5),"3 < 5 < 7"),h(c(6),"3 < 6 < 7"),h(!c(3),"3 < 3 < 7!!!"),h(!c(7),"3 < 7 < 7!!!");var d=function(a){return a%2==1},e=o(a,b,d);h(e(5),"5 is odd"),h(!e(4),"4 is even")}();var p=function M(a){var b=c.call(arguments,1);return function(){return a.apply(null,arguments)||b.length>0&&M.apply(null,b).apply(null,arguments)}};!function(){var a=function(a){return a>6},b=function(a){return 4>a},c=p(a,b);h(!c(4),"3 < 4 < 7"),h(!c(5),"3 < 5 < 7"),h(!c(6),"3 < 6 < 7"),h(c(3),"3 < 3 < 7!!!"),h(c(7),"3 < 7 < 7!!!");var d=function(a){return a%2==1},e=p(a,b,d);h(e(5),"5 is odd"),h(!e(4),"4 is even")}();var q=function(a){return function(){return!a.apply(null,arguments)}};!function(){var a=function(a){return a>3},b=function(a){return 7>a},c=function(a){return a>6},d=function(a){return 4>a},e=o(a,b),f=p(c,d);h(!q(a)(4),"!(3 < 4)"),h(q(b)(7),"!(7 < 7)"),h(q(f)(6),"!(3 > 6 > 7)"),h(q(e)(3),"!(3 < 3 < 7)"),h(q(e)(7),"!(3 < 7 < 7)"),h(n(),"true_fun() always returns true"),h(n(4),"true_fun() always returns true"),h(n(4,6,3,5),"true_fun() always returns true")}();var r=function(a){return void 0!==a[b]},s=function(a,c){return a[b]==c[b]};!function(){h(s(["volk",0],["koza",0]),"0 == 0"),h(!s(["volk",0],["volk",1]),"0 != 1")}();var t=function(b,c){return b[a]==c[a]};!function(){h(t(["volk",0],["volk",1]),"volk == volk"),h(!t(["volk",0],["koza",0]),"volk != koza")}();var u=function(a,c){return t(a,c)&&(!c[b]||s(a,c))},v=function(a,b){return l(a,f(u,void 0,b))};!function(){var a=[["volk",0],["koza",1],["volk",1],["kapusta",0],["muzhik",1],["kapusta",0]];h(v(a,["volk"]),"There are volk"),h(v(a,["koza"]),"There are koza"),h(v(a,["kapusta"]),"There are kapusta"),h(v(a,["muzhik"]),"There are muzhik"),h(!v(a,["korova"]),"There are not korova")}();var w=function(a,b,c){return c<=m(a,d(t,b))};!function(){var a=[["volk",0],["koza",1],["volk",1],["kapusta",0],["muzhik",1],["kapusta",0]];h(w([],["volk"],0),"There are 0 volks"),h(w(a,["volk"],2),"There are 2 volks"),h(w(a,["koza"],1),"There are 1 koza"),h(w(a,["kapusta"],1),"There are 2 kapustas"),h(!w(a,["muzhik"],2),"There are 1 muzhik"),h(!w(a,["korova"],1),"There are not korova"),h(w(a,["korova"],0),"There are not korova"),h(!w(a,["volk"],3),"There are 2 volks")}();var x=function(a,b,c,d){return a!==b&&t(a,c)&&t(b,d)?!(r(c)&&r(d)&&s(a,b)^s(c,d)):!1};!function(){var a=function(a){return["f",a]},b=function(a){return["m",a]},c=a("i"),d=a("j"),e=b("i"),f=b("j"),g=a(1),i=a(2),j=a(1),k=b(1),l=b(2);h(x(g,i,c,d),"corresponds"),h(x(g,j,c,c),"corresponds"),h(!x(g,g,c,c),"doesn't correspond. 'f' is the same"),h(!x(k,l,c,d),"doesn't correspond"),h(x(g,l,c,f),"corresponds"),h(x(g,k,c,e),"corresponds")}();var y=function(a,b){return function(c,d){return!t(c,a)||b(c,d)}},z=function(a,b){return y(a,function(c,d){return k(d,f(q(x),c,void 0,a,b))})},A=z,B=function(a,b){return y(a,function(c,d){return l(d,f(x,c,void 0,a,b))})},C=function(a,b,c){return y(a,function(d,e){return void 0===c?b<=e.length:c<=m(e,f(x,d,void 0,a,b))})},D=function(a){return e(v,a)},E=function(a,b){return function(c){return void 0===b?c.length>=a:w(c,a,b)}},F=function(a){return function(b){return k(b,f(a,void 0,b))}};!function(){var a=[["f",1],["d",1],["m",2],["d",2]],b=F(p(B(["d","i"],["f","i"]),B(["d","i"],["m","i"])));h(b(a),"Must be true because d-1 has f-1 and d-2 has m-2")}(),function(){var a=["man"],b=["volk"],c=["koza"],d=["kapusta"],e=A(c,b),f=A(d,c),g=B(c,a),i=B(d,a),j=F(o(p(g,e),p(i,f))),k=p(D(a),F(o(e,f))),l=[[!0,[a,b,c,d],"That must be OK! man is there"],[!1,[b,c,d],"Alarm! they all eat each other"],[!0,[a,b,c],"That must be OK! man is there"],[!1,[b,c],"Alarm! volk eats koza"],[!0,[c,d,a],"That must be OK! man is there"],[!1,[c,d],"Alarm! koza eats kapusta"],[!0,[b,d,a],"That must be OK! man is there"],[!0,[b,d],"That must be OK! volk ok with kapusta"],[!0,[b],"That must be OK! any of them ok along"],[!0,[a],"That must be OK! any of them ok along"],[!0,[c],"That must be OK! any of them ok along"],[!0,[d],"That must be OK! any of them ok along"],[!0,[b,a],"That must be OK! any of them ok with man"],[!0,[c,a],"That must be OK! any of them ok with man"],[!0,[d,a],"That must be OK! any of them ok with man"],[!0,[],"That must be OK! nobody there, there are no conflicts"]],m=function(a,b){l.forEach(function(c){h(c[0]==a(c[1]),b+": "+c[2])})};m(j,"Rule 1"),m(k,"Rule 2")}(),function(){var a=F(C(["stiralka"],["muzhik"],3));h(!a([["stiralka"]]),"needs 3 has 0"),h(!a([["stiralka"],["muzhik"]]),"needs 3 has 0"),h(!a([["stiralka"],["muzhik"],["muzhik"]]),"needs 3 has 0"),h(a([["stiralka"],["muzhik"],["muzhik"],["muzhik"]]),"needs 3 has 3"),h(a([["stiralka"],["muzhik"],["muzhik"],["muzhik"],["muzhik"]]),"needs 3 has 4")}(),function(){var a=function(a){return["zhul",a]},b=function(a){return["chem",a]},c=[b(1),b(1),a(2),b(2),b(2),a(3),b(3),b(3)],d=F(p(B(["chem","i"],["zhul","i"]),z(["chem","i"],["zhul","j"])));h(!d(c),"There are chem-1 without zhul-1")}();var G="right",H="left",I=function(){var b=function(a,b){return a.length>0?H:b.length>0?G:H};!function(){h(H==b([1,2],[3,4]),"left priority"),h(H==b([1,2],[]),"left priority"),h(H==b([],[]),"left priority"),h(G==b([],[1,2]),"left is empty but right is not")}();var e=function(a){return a.length>0},f=function(a,b){for(var c=0,d=b.length,e=0;d>e;++e){var f=a[b[e][0]];c+=void 0===f?1:f}return c};!function(){var a={volk:2,muzhik:1,nothing:0},b=[["muzhik"],["volk"],["kapusta"],["muzhik"],["kapusta"],["nothing"],["nothing"]];h(6==f(a,b),"Sum must be equal 6")}();var g=function(a,b,c,d){var e=a.length;c=c||0,d=void 0===d?e:d;for(var f=c;d>f;++f)if(b(a[f],f))return f;return-1};!function(){h(-1==g([1,2,3,4],function(){return!1}),"must not find anyting"),h(0==g([1,2,3,4],function(){return!0}),"must find first (ind=0) element"),h(1==g([1,2,3,4],function(a){return a%2==0}),"arr[1] == 2 is first even element"),h(3==g([1,2,3,4],function(a){return a%2==0},2),"arr[3] == 4 is first even element beginning from [2]"),h(-1==g([1,2,3,4],function(a){return a%4==0},0,3),"last elem%%4 is arr[3]==4 but it's over searching interval")}();var i=function(b,c){return b[c[a]]||n},k=function(a,b){return g(a,d(o(t,s),b))},l=function(a,b,c,d){var e=b.slice(),f=c.slice(),g=[],h=b.concat(c);if("function"!=typeof a||a(h))for(var j=d.length,l=0;j>l;++l)if(d[l]){var m=k(e,d[l]);if(-1!=m&&i(a,d[l])(h)){var n=e.splice(m,1)[0];g.push(n),f.push(n)}}return{from:e,to:f,what:g}};!function(){var a={stiralka:E(["muzhik"],3)},b=[["muzhik"],["muzhik"],["muzhik"],["stiralka"]],c=[],d=[["muzhik"],["stiralka"]],e=l(a,b,c,d);h(2==e.from.length,"muzhik, muzhik in from"),h(2==e.what.length,"muzhik, stiralka were moved "),h(2==e.to.length,"muzhik, stiralka in to");var f=[["muzhik"],["muzhik"],["stiralka"]],g=[["korova"]],i=[["muzhik"],["stiralka"]],j=l(a,f,g,i);h(2==j.from.length,"muzhik, stiralka are in from"),h(1==j.what.length,"muzhik was moved"),h(2==j.to.length,"muzhik, korova are in to")}();var m=function(a,b,c,d,e,g,h,i){var j=a.config,k=l(j.transaction_rules,b,a.boat,d),m=f(j.types_weights,k.to);if(a.boat_position!=e||!h(k.from)||!j.boat_rules(k.to)||!j.boat_moving_rules(k.to)||m>j.boat_capacity)return!1;var n=c.slice(),o=l(j.transaction_rules,k.to,c,k.to),p=o.from.concat(o.to);return i(p)?(a[e]=k.from,a.boat=o.from,a[g]=o.to,a.boat_position=g,a.last_moving_timestamp=(new Date).getTime(),{transaction_what:k.to,transaction_from:k.from,transaction_to:n,from_boat_position:e,weight_what:m}):!1},r=function(a){var b=m.apply(this,arguments);a.config.score_counter(b,a);var c=a.config.win_rules(a);c&&a.print_fun(c===!0?"Победа!":c);var d=a.config.loose_rules(a);return d&&a.print_fun(d===!0?"Поражение!":d),a.config.print_score(a),Boolean(b)},u=function(a){return 0==a.left.length&&0==a.boat.length},v=function(a,b){a&&++b.score},w=function(a){a.print_fun(a.score+" рейсов")},x=function(a,c){this.left=a.left||[],this.right=a.right||[],this.boat=a.boat||[],this.boat_position=a.boat_position||b(this.left,this.right),this.score=0,this.print_fun=c||function(){},this.last_moving_timestamp=(new Date).getTime(),this.config={left_rules:a.left_rules||a.rules||n,right_rules:a.right_rules||a.rules||n,boat_rules:a.boat_rules||a.rules||n,boat_moving_rules:a.boat_moving_rules||e,boat_capacity:a.boat_capacity||0,types_weights:a.types_weights||{},transaction_rules:a.transaction_rules||n,win_rules:a.win_rules||u,loose_rules:a.loose_rules||q(n),score_counter:a.score_counter||v,print_score:a.print_score||w}};x.prototype.to_right=function(a){var b=this;return r(b,b.left,b.right,a,H,G,b.config.left_rules,b.config.right_rules)},x.prototype.to_left=function(a){var b=this;return r(b,b.right,b.left,a,G,H,b.config.right_rules,b.config.left_rules)},x.prototype.is_win=function(){return this.config.win_rules(this)},function(){var a=new x({left:[["muzhik"],["muzhik"],["muzhik"],["stiralka"]],boat_capacity:3,boat_moving_rules:D(["muzhik"]),transaction_rules:{stiralka:E(["muzhik"],3)}});h(a.to_right([["muzhik"],["muzhik"],["stiralka"]]),"correct: [muzhik] --- [stiralka]-[muzhik, muzhik]"),h(!a.is_win(),"Not win"),h(!a.to_right([["muzhik"]]),"Incorrect boat side"),h(!a.to_left([]),"Can't go without muzhik"),h(a.to_left([["muzhik"]]),"correct: [muzhik, muzhik]-[stiralka] --- [muzhik]"),h(!a.is_win(),"Not win"),h(a.to_right([["muzhik"],["muzhik"]]),"correct: [] --- [] - [muzhik, muzhik, muzhik, stiralka]"),h(a.is_win(),"Win")}(),function(){var a=["muzhik"],b=["volk"],c=["koza"],d=["kapusta"],e=A(c,b),f=A(d,c),g=(B(c,a),B(d,a),new x({left:[b,c,d,a],boat_capacity:2,rules:p(D(a),F(o(e,f))),boat_moving_rules:D(a)}));h(!g.is_win(),"Not win"),h(!g.to_right([b]),"Can't go without muzhik"),h(!g.to_right([a,d]),"Can't go: volk eats koza"),h(!g.to_right([a,b]),"Can't go: koza eats kapusta"),h(g.to_right([a,c]),"Correct: [volk, kapusta] --- []-[muzhik, koza]"),h(!g.is_win(),"Not win"),h(!g.to_left([c]),"Can't go without muzhik"),h(g.to_left([a,b]),"There are no volk but muzhik moves: [volk, kapusta, muzhik]-[] --- [koza]"),h(!g.is_win(),"Not win"),h(!g.to_left([a]),"Boat is already on the left"),h(!g.to_right([a,b,d]),"Overweight!"),h(!g.to_right([b,d]),"Can't go without muzhik"),h(g.to_right([a,d]),"Correct: [volk] --- []-[muzhik, koza, kapusta]"),h(!g.is_win(),"Not win"),h(!g.to_left([a]),"Can't go: koza eats kapusta"),h(g.to_left([a,c]),"Correct: [volk, muzhik, koza]-[] --- [kapusta]"),h(!g.is_win(),"Not win"),h(g.to_right([a,b]),"Correct: [koza] --- []-[volk, muzhik, kapusta]"),h(!g.is_win(),"Not win"),h(g.to_left([a]),"Correct: [koza, muzhik]-[] --- [volk, kapusta]"),h(!g.is_win(),"Not win"),h(g.to_right([a,c]),"Correct: [] --- []-[volk, koza, kapusta, muzhik"),h(g.is_win(),"Win")}();var y=function(a){return a.length>1?a[0]+"-"+a[1]:a[0]},z=function(a){return"["+j(a,y).join(", ")+"]"},C=function(a){var b=a.match(/^\W*?((?:\w|[а-я]|[А-Я])+).*?(\d*)\D*$/);return null==b?null:b[2].length>0?[b[1],b[2]]:[b[1]]},I=function(a){var b=z(a.left),c=z(a.right),d=z(a.boat);return a.boat_position==H?b+" -- "+d+"~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"+c:b+"~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~"+d+" -- "+c};!function(){h("koza"==y(["koza"]),"Must be 'koza'"),h("koza-1"==y(["koza",1]),"Must be 'koza-1'");var a=z([["koza"],["koza",10]]);h("[koza, koza-10]"==a,"Waiting the '[koza, koza-10]' but was "+a);var b=[["  asdf23dsa23",1,"asdf23dsa23",void 0],["  asdf23dsa",1,"asdf23dsa",void 0],["  asdf23dsa-4312njn-_jlk123jkj32fdsa",2,"asdf23dsa",32],["  asdf23dsa-4312njn-_jlk123jkj32",2,"asdf23dsa",32],["asdf23dsa-4312njn-_jlk123jkj32",2,"asdf23dsa",32],["koza",1,"koza",void 0],["koza-10",2,"koza",10],["koza-10",2,"koza",10],["",null]];b.forEach(function(a){var b=C(a[0]);null!=b?(h(a[1]==b.length,"Length of result must be "+a[1]),h(a[2]==b[0],"Type of object must be "+a[2]),h(a[3]==b[1],"Family of object must be "+a[3])):h(null==a[1],"Result must be null")})}();var J=function(a,b,c){var d=[];return Array.prototype.forEach.call(c,function(a){var b=j(a.split(/(?:,|\s)+/),C);d=d.concat(b)}),a[b](d)},K=function(a){this.game_raw=a};return K.prototype.display_in_log=function(){console.log(I(this.game_raw))},K.prototype.to_right=function(){return J(this.game_raw,"to_right",c.call(arguments))},K.prototype.to_left=function(){return J(this.game_raw,"to_left",c.call(arguments))},K.prototype.is_win=function(){return this.game_raw.is_win()},function(){var a=new x({left:[["muzhik",1],["muzhik",2],["muzhik"],["stiralka"]],boat_capacity:3,boat_moving_rules:D(["muzhik"]),transaction_rules:{stiralka:E(["muzhik"],3)}}),b=new K(a),c=d(I,a);h(b.to_right("muzhik-1, muzhik-2","stiralka"),"correct: [muzhik] --- [stiralka]-[muzhik-1, muzhik-2]"),h(!b.is_win(),c),h(!b.to_right("muzhik"),"Incorrect boat side"),h(!b.to_left(""),"Can't go without muzhik"),h(b.to_left("muzhik-1"),"correct: [muzhik, muzhik-1]-[stiralka] --- [muzhik-2]"),h(!b.is_win(),c),h(b.to_right("muzhik","muzhik-1"),"correct: [] --- [] - [muzhik, muzhik-1, muzhik-2, stiralka]"),h(b.is_win(),c)}(),{Game:K,GameRaw:x}}(),J=function(){var c=15,e=3*c,f=.3*c,g=.6*c,h=6,i=2*c,j=20,k=50,l=h*(c+f)-f+i,m=450,n=m-i,o=1/12;draw_rectangle=function(a,b,d){d.tailDown(),repeat(2),d.go(a*c).rotate(90).go(b*c).rotate(90),end(),d.tailUp()},draw_man=function(a,b){var d=a*c,e=.7*d,f=d/10,g=d/20;b.tailDown(),b.rotate(60).go(d).rotate(-120).go(d),b.tailUp(),b.go(-d).rotate(150),b.tailDown().go(d),b.rotate(120).go(e).tailUp(),b.go(-e).rotate(120),b.tailDown().go(e).tailUp(),b.go(-e).rotate(120),b.tailDown().go(f),b.rotate(-90),repeat(20),b.go(g).rotate(18),end(),b.tailUp(),b.rotate(90).go(-f).go(-d).rotate(-30).go(-d),b.rotate(-60)},draw_woman=function(a,b){var d=a*c,e=.8*d,f=d/10,g=d/20,h=d*Math.cos(15/180*Math.PI)*2;b.tailDown(),b.rotate(75).go(h).rotate(-150).go(h),b.rotate(75).go(-d),b.tailUp(),b.rotate(75).go(h).rotate(15),b.tailDown().rotate(120).go(e).tailUp(),b.go(-e).rotate(120),b.tailDown().go(e).tailUp(),b.go(-e).rotate(120),b.tailDown().go(f),b.rotate(-90),repeat(20),b.go(g).rotate(18),end(),b.tailUp(),b.rotate(90).go(-f).go(-d).rotate(-30).go(-d),b.rotate(-60)},draw_triangle=function(a,b){var d=a*c;b.tailDown(),repeat(3),b.go(d).rotate(120),end(),b.tailUp()};var p,q,r=function(d,g,i,j){var k=0,l=0,m=c+f;j.forEach(function(c){d.setColor(g[c[b]]||g[c[a]]||"black"),i[c[a]](d),d.go(m),++l,l>=h&&(d.go(-m*l).rotate(90).go(e).rotate(-90),l=0,++k)}),d.go(-m*l).rotate(90).go(-e*k).rotate(-90)},s=function(a){a.go(j),a.go(l/2+n/2),a.setWidth(n-l),a.setColor("#5cf"),a.rotate(90).tailDown(),a.go(1e3).go(-1e3),a.tailUp().rotate(-90),a.setWidth(1),a.go(-l/2-n/2),a.go(-j)},t=function(a){return 2*g+a*(c+f)-f},u=function(a,b){a.setColor("black");var c=g*Math.sqrt(2),d=t(b)-2*g;a.rotate(90).go(g).rotate(-90),a.tailDown(),a.rotate(-45).go(c).rotate(45).go(d).rotate(45).go(c),a.tailUp(),a.go(-c).rotate(-45).go(-d).rotate(-45).go(-c).rotate(45),a.rotate(90).go(-g).rotate(-90)},v=function(a,b,c,e,f,i,o,p){begin(),s(a);var q=(b.concat(c).concat(e),d(r,a,i,o));f=Math.min(f,h);var v=t(f),w=l+(n-l-v)*p;a.go(j).rotate(90).go(k).rotate(-90),q(b),a.go(w),u(a,f),a.go(g),q(c),a.go(-g),a.go(m-w),q(e),a.go(-m),a.go(-j).rotate(90).go(-k).rotate(-90),end()},w={man:d(d,draw_man),woman:d(d,draw_woman),rectangle:d(d,draw_rectangle),triangle:d(d,draw_triangle)},x=function(a){this.game=a,this.last_updated_timestamp=0,this.animation_stack=[]};x.prototype.start=function(){var a=this;a.is_stopped=!1,function b(){if(!a.is_stopped){var c=a.game.game_raw,d=a.game.config,e=c.boat_position==H?0:1;if((p||createTortoise)&&a.last_updated_timestamp<c.last_moving_timestamp){if(p=p||createTortoise(0,0),clearCanvas(),0!=a.animation_stack.length){var f=a.animation_stack[0];return v(p,f.left,f.boat,f.right,c.config.boat_capacity,d.colors,d.drawers,f.position),f.position+=f.direction*o,(f.position<0||f.position>1)&&a.animation_stack.shift(),f.position=Math.max(0,Math.min(1,f.position)),void requestAnimationFrame(b)}v(p,c.left,c.boat,c.right,c.config.boat_capacity,d.colors,d.drawers,e),a.last_updated_timestamp=c.last_moving_timestamp}a.is_animation||setTimeout(b,200)}}()},x.prototype.stop=function(){this.is_stopped=!0},x.prototype.animate_movement=function(a,b,c,d){var e=this;e.animation_stack.push({left:a,boat:b,right:c,direction:d==H?1:-1,position:d==H?0:1})};var y=function(){q&&q.stop(),clearCanvas&&clearCanvas()},z=function(a){y(),a.config.drawers&&(q=new x(a),q.start())},A=function(a,b,c,d){q&&q.animate_movement(a,b,c,d)};return window.dr=w,{drawers:w,start_drawing:z,stop_drawing:y,animate_movement:A}}(),K=function(){var a,b,e=I.Game,f=I.GameRaw,g=function(a,b){i(b)?b.forEach(function(b){a.push(b)}):a.push(b)},h=function(a){var b=c.call(arguments,1),e=typeof a;if("function"==e)return a.apply(this,b);if("object"==e&&a.constructor.toString().match("function Array.*")){var f=[];return j(a,function(a){return h.apply(this,[a].concat(b))}).forEach(d(g,f)),f}if(b.length>0){var f=[a];return g(f,h.apply(this,b)),f}return a},k=function(){var a=h.apply(this,arguments);console.log("object"==typeof a&&a.constructor.toString().match("function Array.*")?a.join("\n"):a)},l=[],m={description:"Example lesson",problems:[{title:"Volk, koza i kapusta",description:["What does the","fox say"],config:function(){{var a=["muzhik"],b=["volk"],c=["koza"],d=["kapusta"],e=A(c,b),f=A(d,c);B(c,a),B(d,a)}return{left:[b,c,d,a],boat_capacity:2,rules:p(D(a),o(e,f)),boat_moving_rules:D(a)}}()}]},n={},q=function(a){k(j(a,function(a,b){return b+"		"+n[b]}))},r=function(a){a?k(n[a+"_full"]||n[a]):(k(n.help_main),q(u),k(n.help_post_execute_message))},s=function(b){var c=void 0===b?m:l[b];k(c.title+"\n"),k(j(c.problems,function(a,b){return"№ "+b+".	"+a.title})),k(""),c===m?k(n.problems_post_execute_message,a):k(n.problems_post_execute_message_for_other_lesson,b,m.title)},t=function(d){if(!m.problems[d])return!1;a=d;var g=m.problems[d].config;if("function"==typeof g&&(g=g.apply(null,c.call(arguments,1))),b=new e(new f(g,k)),g.drawers){b.config={drawers:g.drawers,colors:g.colors||{}};var h=b.game_raw.config.score_counter;b.game_raw.config.score_counter=function(a,b){a&&(a.from_boat_position==H?J.animate_movement(a.transaction_from,a.transaction_what,a.transaction_to,a.from_boat_position):J.animate_movement(a.transaction_to,a.transaction_what,a.transaction_from,a.from_boat_position)),h(a,b)},J.start_drawing(b)}return!0};t(0);var u={help:r,list:s,problems:s,lessons:function(){k([n.lessons_pre_execute_message,""]),k(j(l,function(a,b){return["№ "+b+".	"+a.title+"\n",a.description+"\n"]})),k(""),k(n.lessons_post_execute_message,m.title)},lesson:function(a){x(l[a]),k(n.lesson_post_execute_message)},show:function(c){c=void 0===c?a:c;var d=m.problems[c];k("№ "+c+"."+d.title+"\n"),k(d.description),k("\n"),c==a&&b.display_in_log()},start:function(d){d=void 0===d?a:d;var e=c.call(arguments);e[0]=d,t.apply(null,e)?(k(n.start_title,a,m.problems[a].title),b.display_in_log(),k(["",n.start_post_execute_message,""])):(k(n.start_error_message),r.start())},restart:function(){var d=c.call(arguments);d.unshift(a),t.apply(null,d),b.display_in_log()},state:function(){b.display_in_log()},move:function(){b.game_raw.boat_position==H?b.to_right.apply(b,arguments):b.to_left.apply(b,arguments),b.display_in_log()}},v=function(){for(var a in u)u.hasOwnProperty(a)&&(window[a]=u[a]);setTimeout(function(){k(n.init_globals_message)},2e3)},w=function(a){n=a;for(var b in u)u.hasOwnProperty(b)&&(u.help[b]=u[b].help=d(u.help,b))},x=function(a){m=a,t(0)},y=function(a){l=a,x(l[0])};return{init_global_commands:v,init_messages:w,init_lesson:x,init_lessons:y}}();!function(){var a={init_globals_message:["\n\nMышкой можно растянуть окно консоли, чтобы сделать его повыше, чтобы удобнее было читать текст.\n","Для начала наберите команду help()"],help:"help() - вывести эту справку; help.command() или command.help() - вывести справку по конкретной команде",help_main:["Для того, чтобы посмотреть список задач текущего урока, наберите list() или problems().\n","Ну а вообще, доступны следующие команды:\n"],help_full:["Команда help() применённая к другой команде выводит справку по ней","Примеры:","	help.list()","	list.help()","	help.to_left()","	help.help()"],help_post_execute_message:"\nВ общем, набирайте команду list().\n",list:"вывести список задач",list_full:["Команда problems() или list() выводит список имеющихся задач, выбранного урока. Вызывается без параметров.","Пример:","	list()"],lessons:"отобразить список уроков",lessons_pre_execute_message:"Список уроков:",lessons_post_execute_message:function(a){return["Набирайте команду lesson(N), где N - это номер выбранного урока.",'В данный момент выбран урок "'+a+'."']},lesson:"выбрать нужный урок",lesson_post_execute_message:["Вы выбрали новый урок.","Наберите команду problems(), чтобы посмотреть задачи этого урока"],problems:"вывести список задач",problems_full:["Команда problems() или list() выводит список имеющихся задач, выбранного урока. Вызывается без параметров.","Пример:","	problems()"],problems_post_execute_message:function(a){return["Если нравится какая-то задача, набирайте start(N), где N - это номер вашей задачи.","В данный момент выбрана задача № "+a+".\n","Решили все задачи этого урока? Набирайте команду lessons(), чтобы выбрать другой урок.\n"]},problems_post_execute_message_for_other_lesson:function(a,b){return["Если нравятся задачи этого урока, набирайте lesson("+a+"), а затем start(N).\n",'В данный момент выбран урок "'+b+'".\n']},show:"show(), show(number) - показать условие задачи",show_full:["Команда show() с указанным в скобках номером задачи выводит условие этой задачи","Вызыванная команда show() без аргументов показывает условие текущей задачи.","Примеры:","	show()	 - выведет условие текущей заадчи","	show(5)	 - выведет условие пятой заадчи"],start:"start(number) - начать решать задачу с номером number",start_full:["Команда start() с указанным в скобках номером задачи стартует соответствующую задачу.","Вы её решаете, перемещая героев с берега на берег при помощи команд to_left() и to_right()","Пример:","	start(5)	 - стартуем пятую задачу"],start_title:function(a,b){return"Выбрана задача № "+a+". "+b+"\n"},start_post_execute_message:"Наберите команду show(), чтобы прочитать условие задачи",start_error_message:"Что-то пошло не так!\n",restart:"начать решать текущую задачу заново",restart_full:["Команда restart() сбрасывает все ваши действия и вы начинаете решать задачу заново. Команда restart() вызывается без аргументов"],state:"отобразить состояние текущей задачи",state_full:["Команда state() вызывается без аргументов и отображает состояние текущей игры. Показывает, где какой участник расположен: на лодке или на одном из берегов.","Формат отображения следующий:","[левый берег] -- [лодка] ~~~~~~~~~~~~~~ [правый берег]	 - если лодка на левом берегу","[левый берег] ~~~~~~~~~~~~~~ [лодка] -- [правый берег]	 - если лодка на правом берегу","Примеры:","	state() 	 -> 	 [волк, капуста] ~~~~~~~~~~~~~~ [] -- [коза, лодочник]"],move:'move("волк, коза, капуста") - переправить перечисленных участников с берега, где стоит лодка, на противоположный',move_full:'move("волк, коза, капуста") - переправить перечисленных участников с берега, где стоит лодка, на противоположный'};K.init_messages(a)}(),function(){var a=J.drawers,b={title:"Переправы от Шаповаловых (Квантик № 3, 2014)",description:["Все знают задачу про перевозку волка, козы и капусты. В первый раз она производит большое впечатление. Ведь казалось, что невозможно, и вдруг - вот способ! И всё так наглядно: можно взять фигурки и подвигать их, а то и поиграть: ты будешь козой, ты волком, ты крестянином...","Подборки задач на переправу пользуются популярностью. Но вот список сюжетов в них очень небольшой: два мальчика и полк солдат, рыцари и оруженосцы (или дамы сердца), миссионеры и каннибалы (или купцы и разбойники), переход через мост с фонариком. Для каждого сюжета есть 2-3 задачи. Мало!",'Тогда я решил придумать сам. С первой задачей помог сын, вспомнив, как мы переезжали на новую квартиру и грузчиков не хватало. Оказалось, что в такие задачи можно "зашить" математику и посерьёзнее. Порешайте и убедитесь в этом сами. Только давайте сразу договоримся: никаких нематематических трюков с выпрыгиванием из лодки, которая не пристала к берегу. А лодку, приставшую к берегу, будем считать частью этого берега.',"\n	trtg.org: Сюда не вошла задача № 10 из статьи, так как наша программка не умеет моделировать телепорт, где берега взаимно обмениваются героями, не задействуя лодку."],problems:[{title:"Стиральная машина",description:["Три человека со стиральной машиной хотят переправиться через реку. Катер вмещает либо двух человек и стиральную машину, либо трёх человек. Беда в том, что стиральная машина тяжёлая, поэтому погрузить её в катер или вытащить из него можно только втроём. Смогут ли они переправиться?","\n	Командой move() возите героев туда-сюда.","	Пример:",'		move("чел, чел, стиралка")'],config:function(){var b=["чел"],c=["стиралка"];return{left:[b,b,b,c],boat_capacity:3,boat_moving_rules:D(b),transaction_rules:{"стиралка":E(b,3)},drawers:{"чел":a.man(1),"стиралка":a.rectangle(1,1)},colors:{"чел":"black","стиралка":"blue"}}}()},{title:"Три жулика и шесть чемоданов",description:["Три жулика, каждый с двумя чемоданами, находятся на одном берегу реки, через которую они хотят переправиться. Есть трёхместная лодка, каждое место в ней может быть занято либо человеком, либо чемоданом. Никто из жуликов не доверит свой чемодан спутникам в своё отсутствие, но готов оставить чимоданы на безлюдном берегу. Смогут ли они переправиться?","\n	Командой move() возите героев туда-сюда.","	ж - жулик, ч - чемодан.","	Пример:",'		move("ж-1, ж-2, ч-1")'],config:function(){var b=function(a){return["ж",a]},c=function(a){return["ч",a]};return{left:[b(1),c(1),c(1),b(2),c(2),c(2),b(3),c(3),c(3)],boat_capacity:3,rules:F(p(B(["ч","i"],["ж","i"]),z(["ч","i"],["ж","j"]))),boat_moving_rules:D(["ж"]),drawers:{"ч":a.rectangle(1,1),"ж":a.man(1)},colors:{1:"green",2:"blue",3:"black"}}}()},{title:"Две семьи (a)",description:["Две семьи (в каждой папа, мама и дочь) хотят переправиться через реку. Есть двухместная лодка. Грести могут только мужчины. Дочери могут быть на берегу или в лодке только вместе с кем-нибудь из своих родителей. Как им всем переправиться на другой берег?","\n	Командой move() возите героев туда-сюда.","	f - папа, m - мама, d - дочь","	Пример:",'		move("f-1, d-1")'],config:function(){return{left:[["f",1],["m",1],["d",1],["f",2],["m",2],["d",2]],boat_capacity:2,rules:F(p(B(["d","i"],["f","i"]),B(["d","i"],["m","i"]))),boat_moving_rules:D(["f"]),drawers:{f:a.man(1),m:a.woman(1),d:a.woman(.6)},colors:{1:"green",2:"blue"}}}()},{title:"Две семьи (б)",description:["Задача почти как предыдущая с одним дополнением.\nДве семьи (в каждой папа, мама и дочь) хотят переправиться через реку. Есть двухместная лодка. Грести могут только мужчины. Дочери могут быть на берегу или в лодке только вместе с кем-нибудь из своих родителей, а никакую из женщин нельзя оставлять на берегу одну. Как им всем переправиться на другой берег?","\n	Командой move() возите героев туда-сюда.","	f - папа, m - мама, d - дочь","	Пример:",'		move("f-1, d-1")'],config:function(){return{left:[["f",1],["m",1],["d",1],["f",2],["m",2],["d",2]],boat_capacity:2,rules:F(o(p(B(["d","i"],["f","i"]),B(["d","i"],["m","i"])),p(B(["m"],["m"]),B(["m"],["d"]),B(["m"],["f"])))),boat_moving_rules:D(["f"]),drawers:{f:a.man(1),m:a.woman(1),d:a.woman(.6)},colors:{1:"green",2:"blue"}}}()},{title:"Две семьи с сыновьями",description:["Две семьи (в каждой муж, жена и сын) хотят переправиться через реку. Есть двухместная лодка. Грести может всего один человек - один из мужей. Сыновья могут быть на берегу только с кем-нибудь из взрослых. Женщины боятся быть на берегу, если там нет лиц мужского пола. Как им всем переправиться на другой берег?","\n	Командой move() возите героев туда-сюда.","	f - папа, m - мама, s - сын","	Пример:",'		move("f-1, s-1")'],config:function(){return{left:[["f",1],["m",1],["s",1],["f",2],["m",2],["s",2]],boat_capacity:2,rules:F(o(p(B(["s"],["f"]),B(["s"],["m"])),p(B(["m"],["f"]),B(["m"],["s"])))),boat_moving_rules:D(["f","1"]),drawers:{f:a.man(1),m:a.woman(1),s:a.man(.6)},colors:{1:"green",2:"blue"}}}()},{title:"Царевна Соня и 7 богатырей",description:["К переправе подошли царевна Соня и строй из 7 богатырей. Лодка одна, в ней могут плыть двое или трое (в одиночку плыть нельзя). Каждый согласен плыть только вдвоём с другом или втроём с двумя друзьями. Какое наибольшее число из них сможет переправиться, если каждые двое рядом стоящих богатырей - друзья, Соня дружит с ними вместе, кроме среднего из богатырей, а все остальные пары не дружат?","\n	Командой move() возите героев туда-сюда.","	b - богатырь, s - Соня","	Пример:",'		move("b1, s")'],config:function(){var b=["s"],c=["b1"],d=["b2"],e=["b3"],f=["b4"],g=["b5"],h=["b6"],i=["b7"];return{left:[b,c,d,e,f,g,h,i],boat_capacity:3,boat_moving_rules:o(E(2),F(o(z(b,f),z(c,e),z(c,f),z(c,g),z(c,h),z(c,i),z(d,f),z(d,g),z(d,h),z(d,i),z(e,h),z(e,i),z(f,h),z(f,i),z(g,i)))),drawers:{b1:a.man(1),b2:a.man(1),b3:a.man(1),b4:a.man(1),b5:a.man(1),b6:a.man(1),b7:a.man(1),s:a.woman(.7)},colors:{s:"blue"}}}()},{title:"Три вора",description:["Три вора - Камнев, Ножницын и Бумагин, каждый с несколькими баулами, - хотят переправиться через реку. Известно, что Камнев обворует любой баул Ножницына, если баул останется без присмотра кого-нибудь из остальных. Так же Ножницын обворует баул Бумагина, а Бумагин - баул Камнева. Есть трёхместная лодка, место занимает человек или баул. Грести может только Камнев. Как им всем переправиться и перевезти баулы, чтобы никто никого не обворовал?\n(На пустынном берегу баулы в безопасности)","\n	Командой move() возите героев туда-сюда.","	K - Камнев, N - Ножницын, B - Бумагин","	bk - баул Камнева, bk - баул Ножницына, bb - баул Бумагина","	Пример:",'		move("bk, K")',"\n	Также вы можете стартовать задачу с разным количеством баулов:","		restart(1, 10, 3)","	где первое число - количество баулов Камнева, второе - Ножницына, третье - Бумагина."],config:function(b,c,d){b=void 0===b?2:b,c=void 0===c?3:c,d=void 0===d?4:d;var e=function(a){return function(){return[a]}},f=e("bk"),g=e("bn"),h=e("bb"),i=e("K")(),j=e("N")(),k=e("B")(),l=f(),m=g(),n=h(),q=function(a,b){for(var c=[],d=0;a>d;++d)c.push(b());return c};return{left:[i].concat(q(b,f)).concat([j]).concat(q(c,g)).concat([k]).concat(q(d,h)),boat_capacity:3,rules:F(o(p(B(l,i),B(l,j),z(l,k)),p(B(m,j),B(m,k),z(m,i)),p(B(n,k),B(n,i),z(n,j)))),boat_moving_rules:D(i),drawers:{bk:a.rectangle(1,1),bb:a.rectangle(1,1),bn:a.rectangle(1,1),K:a.man(1),N:a.man(1),B:a.man(1)},colors:{bk:"black",bb:"green",bn:"blue",K:"black",N:"green",B:"blue"}}
}},{title:"Дон Кихот и все-все-все",description:["К переправе подошли Дон Кихот и Санчо Панса с жёнами, а также несколько монахинь. Есть двухместная лодка, грести могут только Санчо и его жена. Никто из женщин не желает оказаться на берегу в одиночистве. Правила этикета запрещают женщинам быть в лодке или на берегу с другими мужчинами, если рядом нет мужа или другой женщины. При каком числе монахинь все они смогут переправиться? (Несколько - это больше одной)","\n	Командой move() возите героев туда-сюда.","	D - Дон Кихот, d - жена дона Кихота,","	S - Санчо Панса, s - жена Санчо Пансы,","	m - монахиня,","	Пример:",'		move("bk, K")',"\n	Также вы можете стартовать задачу с разным количеством монахинь:","		restart(5)"],config:function(b){b=b&&b>1?b:5;var c=function(a){return function(){return[a]}},d=c("m"),e=["D"],f=["d"],g=["S"],h=["s"],i=d(),j=function(a){for(var b=[],c=0;a>c;++c)b.push(d());return b}(b),k=o(C(i,2),C(f,2),C(h,2)),l=o(p(B(i,i),B(i,f),B(i,h),o(z(i,e),z(i,g))),p(B(f,i),B(f,e),B(f,h),z(f,g)),p(B(h,i),B(h,g),B(h,f),z(h,e)));return{left:[e,f,g,h].concat(j),boat_capacity:2,rules:F(o(k,l)),boat_rules:F(o(l)),boat_moving_rules:p(D(g),D(h)),drawers:{D:a.man(1),d:a.woman(1),S:a.man(.9),s:a.woman(.9),m:a.woman(.8)},colors:{D:"blue",d:"blue",S:"orange",s:"orange",m:"black"}}}},{title:"Жюри",description:["Председатель жюри на своей машине хочет за три рейса перевезти 9 членов жюри с вокзала в лагерь, где проходит турнир. В машине 4 места для пассажиров, дорога в один конец занимает полчаса. Если в любом месте в лагере, в машине или на вокзале оказывается группа из двух, трёх или четырёх человек, она за полчаса придумывает, соответственно 3, 4 или 5 задач. Группы другого размера неработоспособны (не придумывают ничего), председатель за рулём входит в группу в машине, но если пассажиров четверо, то он им придумывать не мешает. Какое наибольшее число задач может быть придумано жюри и председателем за эти 2,5 часа?\nБольшие группы находящиеся на одном месте, на части делить нальзя, больше членов жюри нет).","\n	Командой move() возите героев туда-сюда.","	P - председатель жюри, j - член жюри.","	Пример:",'		move("P, j, j")'],config:function(){var b=function(a){return function(){return[a]}},c=b("j"),d=["P"],e=.5,f=2.5;return{left:[c(),c(),c(),c(),c(),c(),c(),c(),c()],boat:[d],boat_capacity:5,boat_moving_rules:D(d),transaction_rules:{P:q(n)},drawers:{P:a.man(.9),j:a.man(1)},colors:{P:"blue",j:"red"},score_counter:function(a,b){if(a!==!1){var c=b.jury_spent_time||0;if(!(c>=f)){b.jury_spent_time=c+e;var d=a.transaction_what,g=a.transaction_to,h=a.transaction_from,i=function(a,b){return 2==a?3:3==a?4:4==a?5:5==a&&b?5:0};b.score+=i(d.length,!0)+i(g.length,!1)+i(h.length,!1)}}},print_score:function(a){a.print_fun("Задач: "+a.score+", время: "+a.jury_spent_time+" из "+f)},win_rules:function(a){return a.jury_spent_time>=f&&"Время вышло!"}}}()},{title:"Мебель",description:["Трём братьям надо перевезти с одной квартиры на другую рояль весом 250 кг, диван весом 100 кг и более 100 коробок по 50 кг. Был нанят небольшой фургон с шофёром на 5 рейсов туда (и 4 обратно), который может за раз перевезти 500 кг груза и одного пассажира. Погрузить или выгрузить диван братья могут вдвоём, рояль - втроём, с коробками любой из братьев справляется в одиночку. Надо перевезти всё мебель и как можно больше коробок. Какое наибольшее число коробок удастся перевезти? (Шофёр не грузит, другого транспорта и помощников нет, пассажиров вместо груза везти нельзя","\n	Командой move() возите героев туда-сюда.","	S - шофёр, B - брат, r - рояль, d - диван.","	Коробки не указаны, они грузятся и учитываются атоматически","	Пример:",'		move("S, B, r")'],config:function(){var b=function(a){return function(){return[a]}},c=b("B"),d=["S"],e=["d"],f=["r"],g=c(),h=9,i=500;return{left:[c(),c(),c(),e,f],boat:[d],boat_capacity:i,boat_moving_rules:o(D(d),F(z(g,g))),transaction_rules:{d:E(g,2),r:E(g,3),S:q(n)},types_weights:{B:0,S:0,r:250,d:100},drawers:{B:a.man(.8),S:a.man(1),d:a.rectangle(1,1.4),r:a.rectangle(1,2)},colors:{S:"gray",B:"blue",r:"black",d:"orange"},score_counter:function(a,b){if(a!==!1){var c=b.divan_i_royal_steps||0;if(!(c>=h)){b.divan_i_royal_steps=c+1;var d=a.transaction_what,e=a.transaction_to,f=a.transaction_from,j=a.from_boat_position==H,k=a.weight_what,l=v(d,g)||v(f,g)&&v(e,g);j&&l&&(b.score+=(i-k)/50)}}},print_score:function(a){a.print_fun("Коробок: "+a.score+", рейсов: "+a.divan_i_royal_steps+" из "+h)},win_rules:function(a){return a.divan_i_royal_steps>=h&&"Время аренды вышло!"}}}()}]},c={title:"Переправы (http://www.ashap.info/Zadachi/Perepravy-ch.html)",description:["Подборка не моих задач на переправу (но все они встречались в моих книжках или занятиях). Порешайте. \nТолько не надо трюков с выпрыгиванием пассажира на берег. Помните о такой договорённости: из подошедшей к берегу лодке все должны выйти на берег, даже тот, кто собирается плыть обратно.","\n	trtg.org: Сюда не вошла задача № 7-б оригинальной подборки, так как наша программка не умеет моделировать остров посередине реки."],problems:[{title:"Волк, коза и капуста",description:["Классическая задача. Если лодочник уплыл, то волк ест козу, или коза ест капусту. В лодку помещается не более двух персонажей, а грести умеет только лодочник. Как всем переправиться?","\n	Командой move() возите героев туда-сюда.","	Пример:",'		move("лодочник, волк")'],config:function(){{var b=["лодочник"],c=["волк"],d=["коза"],e=["капуста"],f=A(d,c),g=A(e,d);B(d,b),B(e,b)}return{left:[c,d,e,b],boat_capacity:2,rules:p(D(b),F(o(f,g))),boat_moving_rules:D(b),drawers:{"лодочник":a.man(1),"волк":a.rectangle(1,1),"коза":a.triangle(1),"капуста":a.triangle(.5)},colors:{"лодочник":"blue","капуста":"green","коза":"gray","волк":"black"},colors_of_heroes:["blue","black","green","gray"]}}()},{title:"Крестьянин с двумя волками, собакой и козой",description:["Крестьянин с двумя волками, собакой, козой и мешком капусты подошел к реке. Ему надо переправиться на другой берег, однако лодка трехместная, каждое место занимает человек, животное или мешок капусты. Нельзя оставлять без присмотра волка с козой или собакой, собаку – с козой, а козу – с капустой. Как крестьянину переправиться без потерь?","\n	Командой move() возите героев туда-сюда.","	K - крестьянин, ko - коза, ka - капуста, V - волк, s - собака","	Пример:",'		move("V, V, K")'],config:function(){return{left:[["K"],["V"],["V"],["s"],["ko"],["ka"]],boat_capacity:3,rules:p(D(["K"]),F(o(z(["ka"],["ko"]),z(["ko"],["s"]),z(["ko"],["V"]),z(["s"],["V"])))),boat_moving_rules:D(["K"]),drawers:{K:a.man(1),V:a.rectangle(1,2),s:a.rectangle(1,1),ko:a.triangle(1),ka:a.triangle(.5)},colors:{K:"blue",V:"grey",s:"brown",ko:"black",ka:"green"}}}()},{title:"Полк солдат и два мальчика",description:["Полк солдат подошел к реке. По реке катались на лодке два мальчика. Лодка выдерживает одного солдата или двух мальчиков. Как всем солдатам переправиться на другой берег и вернуть лодку мальчикам?","\n	Командой restart(5) с параметром можете стартовать с разным количеством солдат.","	Командой move() возите героев туда-сюда.","	S- солдат, b - мальчик","	Пример:",'		move("S")'],config:function(b){b=b||5;var c=function(a){return function(){return[a]}},d=c("S"),e=["b"],f=["b"],g=function(a){for(var b=[],c=0;a>c;++c)b.push(d());return b}(b);return{left:[e,f].concat(g),boat_capacity:2,types_weights:{S:2,b:1},drawers:{S:a.man(1),b:a.man(.7)},colors:{S:"blue",b:"green"}}}},{title:"Три мушкетёра",description:["Атос, Портос, Арамис и Д’Артаньян сидели за круглым столом, заспорили, и каждый поссорился со своими двумя соседями. Чтобы ехать дальше, им надо переправиться через реку в двухместной лодке. Каждый из мушкетеров отказывается оставаться вдвоем на берегу или быть в лодке с тем, с кем он в ссоре. Могут ли они все-таки все переправиться?","\n	Командой move() возите героев туда-сюда.","	A - Атос, P - Портос, a - Арамис, D - Д’Артаньян.","	Пример:",'		move("V, V, K")'],config:function(){return{left:[["A"],["P"],["a"],["D"]],boat_capacity:2,rules:p(E(3),F(o(z(["A"],["P"]),z(["A"],["D"]),z(["a"],["P"]),z(["a"],["D"])))),drawers:{A:a.man(1),P:a.man(1),a:a.man(1),D:a.man(1)},colors:{A:"black",P:"blue",a:"green",D:"red"}}}()},{title:"Три туриста",description:["Трое туристов должны перебраться с одного берега реки на другой. В их распоряжении старая лодка, которая может выдержать нагрузку всего в 100 кг. Вес одного из туристов 45 кГ, второго — 50 кГ, третьего — 80 кГ. Как должны они действовать, чтобы перебраться на другой берег?","\n	Командой move() возите героев туда-сюда.","	A - Атос, P - Портос, a - Арамис, D - Д’Артаньян.","	Пример:",'		move("V, V, K")'],config:function(){return{left:[["45"],["50"],["80"]],boat_capacity:100,types_weights:{45:45,50:50,80:80},drawers:{45:a.man(.5),50:a.man(.8),80:a.man(1)}}}()},{title:"Два миссионера и два каннибала",description:["В лодке, вмещающей только двух человек, через реку должны переправиться два миссионера и два каннибала. Миссионеры боятся каннибалов, и хотят всё время быть вдвоём. Как им всем переправиться?","\n	Командой move() возите героев туда-сюда.","	m - миссионер, С - каннибал.","	Пример:",'		move("m, m")'],config:function(){return{left:[["m"],["m"],["C"],["C"]],rules:F(p(B(["m"],["m"]),z(["m"],["C"]))),boat_capacity:2,colors:{m:"blue",C:"black"},drawers:{m:a.man(.8),C:a.man(1)}}}()},{title:"Три миссионера и три каннибала (a)",description:["В лодке, вмещающей только двух человек, через реку должны переправиться три миссионера и три каннибала. Миссионеры боятся оставаться на каком-нибудь берегу в меньшинстве. Как им всем переправиться?","\n	m - миссионер, С - каннибал.","	Пример:",'		move("m, m")'],config:function(){var b=["m"],c=["C"];return{left:[["m"],["m"],["m"],["C"],["C"],["C"]],rules:p(o(E(c,3),E(b,3)),o(q(E(c,3)),E(c,2),E(b,2)),q(E(c,2)),F(z(b,c))),boat_capacity:2,colors:{m:"blue",C:"black"},drawers:{m:a.man(.8),C:a.man(1)}}}()},{title:"Три миссионера и три каннибала (б)",description:["В лодке, вмещающей только двух человек, через реку должны переправиться три миссионера и три каннибала. Миссионеры боятся оставаться на каком-нибудь берегу в меньшинстве. Как им всем переправиться, если грести умеют только один миссионер и один каннибал?","\n	m-1 - гребущий миссионер, С-1 - гребущий каннибал,","	m-2 - обычный миссионер, C-2 - обычный каннибал,","	Пример:",'		move("m, M")'],config:function(){var b=["m"],c=["C"];return{left:[["m",1],["m",2],["m",2],["C",1],["C",2],["C",2]],rules:p(o(E(c,3),E(b,3)),o(q(E(c,3)),E(c,2),E(b,2)),q(E(c,2)),F(z(b,c))),boat_moving_rules:p(D(["m",1]),D(["C",1])),boat_capacity:2,colors:{1:"red",2:"gray"},drawers:{m:a.man(.8),C:a.man(1)}}}()},{title:"Три рыцаря с оруженосцами",description:["Как 3 рыцаря, каждый со своим оруженосцем, могут переправиться через реку на двухместной лодке, если оруженосцы отказываются оставаться с незнакомыми рыцарями без своих хозяев (но могут оставаться на берегу совсем без рыцарей).","\n	R - рыцарь, o - оруженосец.","	Пример:",'		move("R-1, o-1")'],config:function(){return{left:[["R",1],["o",1],["R",2],["o",2],["R",3],["o",3]],rules:F(p(B(["o","i"],["R","i"]),z(["o","i"],["R","j"]))),boat_capacity:2,colors:{1:"red",2:"green",3:"blue"},drawers:{o:a.man(.8),R:a.man(1)}}}()},{title:"Четыре рыцаря с оруженосцами",description:["Как 4 рыцаря, каждый со своим оруженосцем, могут переправиться через реку на трёхместной лодке, если оруженосцы отказываются оставаться с незнакомыми рыцарями без своих хозяев (но могут оставаться на берегу совсем без рыцарей).","\n	R - рыцарь, o - оруженосец.","	Пример:",'		move("R-1, o-1")'],config:function(){return{left:[["R",1],["o",1],["R",2],["o",2],["R",3],["o",3],["R",4],["o",4]],rules:F(p(B(["o","i"],["R","i"]),z(["o","i"],["R","j"]))),boat_capacity:3,colors:{1:"red",2:"green",3:"blue",4:"black"},drawers:{o:a.man(.8),R:a.man(1)}}}()},{title:"Два генерала и полковник",description:["К реке подошли два генерала, каждый – с двумя ординарцами, и один полковник с одним ординарцем. В их распоряжении имеется только одна лодка, вмещающая не более двух человек. Плавать никто не умеет, зато грести умеют все. Смогут ли все восемь человек переправиться на противоположный берег реки, если ни генералы, ни полковник не согласны оставлять ни одного из своих ординарцев в присутствии другого генерала или полковника ни в лодке, ни на берегу (приставшая к берегу лодка считается частью берега)?","\n	G - генерал или полковник, o - ординарец.","	Пример:",'		move("G-1, o-1")'],config:function(){return{left:[["G",1],["o",1],["o",1],["G",2],["o",2],["o",2],["G",3],["o",3]],rules:F(p(B(["o","i"],["G","i"]),z(["o","i"],["G","j"]))),boat_capacity:2,colors:{1:"red",2:"green",3:"blue",4:"black"},drawers:{o:a.man(.8),G:a.man(1)}}}()},{title:"Три генерала",description:[" К реке подошли три генерала, каждый – с двумя ординарцами. В их распоряжении имеется только одна лодка, вмещающая не более двух человек. Плавать никто не умеет, зато грести умеют все. Смогут ли все девять человек переправиться на противоположный берег реки, если ни один из генералов не согласен оставлять ни одного из своих ординарцев в присутствии другого генерала ни в лодке, ни на берегу (приставшая к берегу лодка считается частью берега)?","\n	G - генерал, o - ординарец.","	Пример:",'		move("G-1, o-1")'],config:function(){return{left:[["G",1],["o",1],["o",1],["G",2],["o",2],["o",2],["G",3],["o",3],["o",3]],rules:F(p(B(["o","i"],["G","i"]),z(["o","i"],["G","j"]))),boat_capacity:2,colors:{1:"red",2:"green",3:"blue",4:"black"},drawers:{o:a.man(.8),G:a.man(1)}}}()},{title:"Два жулика с баулами и стражник с разбойником",description:["Два жулика и стражник с арестованным разбойником встретились на берегу реки. У каждого жулика по два баула. Все они хотят перправиться на другой берег реки. Есть лодка, которая выдержит двух человек или человека с баулом. Никто из жуликов не согласен оставаться с разбойником в отсутствии стражника. Никто из жуликов не оставит свой баул с разбойником без стражника или с другим жуликом (даже и в присутстствии стражника). Как им всем переправиться?","\n	z - жулик, b - баул, s - стражник, r - разбойник."],config:function(){return{left:[["r"],["s"],["z",1],["b",1],["b",1],["z",2],["b",2],["b",2]],rules:F(o(p(B(["z"],["s"]),z(["z"],["r"])),p(B(["b","i"],["z","i"]),B(["b"],["s"]),z(["b"],["r"])),p(B(["b","i"],["z","i"]),z(["b","i"],["z","j"])))),boat_capacity:2,boat_moving_rules:p(D(["r"]),D(["s"]),D(["z"])),colors:{1:"green",2:"blue",s:"red",r:"black"},drawers:{z:a.man(.9),s:a.man(1),r:a.man(1),b:a.rectangle(1,1)}}}()},{title:"Семья с фонариком",description:["Семья (папа, мама, сын и бабушка) ночью подошла к мосту, способному выдержать только двух человек одновременно. По мосту можно двигаться только с фонариком. Известно, что папа может перейти мост в одну сторону за минуту, мама – за две, сын – за пять и бабушка – за десять минут. Если по мосту движутся двое, время перехода определяется более медленным из двоих. Как семье переправиться менее чем за 18 минут? (Фонарик у них один, кидать его нельзя, светить издали тоже нельзя.)","\n	p - папа, m - мама, s - сын, b - бабушка.","	Пример:",'		move("p, m")'],config:function(){var b=function(a){return function(){return[a]}},c=(b("j"),18);return{left:[["p"],["m"],["s"],["b"]],boat_capacity:2,drawers:{p:a.man(1),s:a.man(.7),m:a.woman(1),b:a.woman(.9)},score_counter:function(a,b){if(a!==!1){var d=b.family_spent_time||0;if(!(d>=c)){var e=a.transaction_what,f=(a.transaction_to,a.transaction_from,function(a){return v(a,["b"])?10:v(a,["s"])?5:v(a,["m"])?2:v(a,["p"])?1:0});b.family_spent_time=d+f(e),b.score+=1}}},print_score:function(a){a.print_fun("Рейсов: "+a.score+", время: "+a.family_spent_time+" из "+c)},win_rules:function(a){return a.family_spent_time>=c&&"Время вышло!"}}}()}]},d={title:"Переправы Шаповаловых - остатки сладки (http://www.ashap.info/Zadachi/Perepravy-m.html)",description:["Самую первую из этих задач (про стиральную машину) придумал мой сын Данил, помогая составить мне подборку задач на переправы. Потом и я понял, что потребность в таких задачах велика, и стал придумывать. Оказалось, что придумывать новые сюжеты не так сложно. Результат перед вами. Задачи, правда, в среднем несколько сложнее, чем в другой подборке (http://www.ashap.info/Zadachi/Perepravy-ch.html). Так ведь и придумывались они в основном для соревнований подготовленных школьников, а не рядовых любителей жанра. Десять из этих задач вошли в подборку журнала Квантик","\n	trtg.org: Сюда пока не вошла задача № 8-б оригинальной подборки про Али-Бабу, так как в текущей версии нашей программки запись её правил получилась бы очень длинной."],problems:[{title:"Четыре человека с сундуком",description:["Четыре человека с сундуком хотят переправиться через реку. Люди весят 45, 50, 60 и 65 кг, сундук – 100 кг. Лодка выдерживает груз не более 200 кг. Сундук можно погрузить в лодку или вытащить из нее только вчетвером. Как им всё-таки всем переправиться, не оставив и сундук?","\n	45, 50, 60, 65 - люди,","	S - сундук","	Командой move() возите героев туда-сюда.","	Пример:",'		move("45, S")'],config:function(){return{left:[["45"],["50"],["60"],["65"],["S"]],boat_capacity:200,transaction_rules:{S:E(5)},types_weights:{45:45,50:50,60:60,65:65,S:100},boat_moving_rules:p(E(2),q(D("S"))),drawers:{65:a.man(1),60:a.man(.9),50:a.man(.8),45:a.man(.7),S:a.rectangle(1,1)}}}()},{title:"Канатная дорога",description:["К кабинке канатной дороги на гору подошли четверо с весами 50, 60, 70 и 90 кг. Смотрителя нет, а в автоматическом режиме кабинка ходит туда-сюда только с грузом от 100 до 250 кг ( в частности, пустой не ходит), при условии, что пассажиров можно рассадить на две скамьи так, чтобы веса на скамьях отличались не более, чем на 25 кг. Как им всем подняться на гору?","\n	Командой move() возите героев туда-сюда.","	Пример:",'		move("50, 60")'],config:function(){return{left:[["50"],["60"],["70"],["90"]],boat_capacity:250,types_weights:{50:50,60:60,70:70,90:90},boat_moving_rules:o(E(2),p(o(q(E(3)),F(z(["50"],["90"])),F(z(["60"],["90"]))),o(q(E(4)),E(3),q(D(["70"]))),E(4))),drawers:{90:a.man(1),70:a.man(.9),60:a.man(.8),50:a.man(.7)}}}()},{title:"Торговцы с самураем",description:["Несколько торговцев с охраняющим их самураем подошли к переправе. Есть двухместная лодка. Но торговцы самурая побаиваются, им неприятно оставаться с ним один на один в лодке или на берегу. При каком наименьшем числе торговцев всей группе удастся переправится, избежав неприятных ситуаций?","\n	t - торговцы,","	s - самурай","	Командой move() возите героев туда-сюда.","	Пример:",'		move("t, t")',"	Вызывая команду restart() с параметром, вы можете запускать игру с разным количеством торговцев.","	Пример:","		restart(4)"],config:function(b){b=b||1;for(var c=[],d=0;b>d;++d)c.push(["t"]);return c.push(["s"]),{left:c,boat_capacity:2,rules:p(E(3),F(z(["t"],["s"]))),drawers:{t:a.man(.7),s:a.man(1)}}}}]};setTimeout(function(){K.init_lessons([c,b,d])},2e3)}(),setTimeout(function(){K.init_global_commands()},3e3)}();